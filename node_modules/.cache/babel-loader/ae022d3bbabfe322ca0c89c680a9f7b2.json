{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport apiClient from '@/services/AxiosClient.js';\nimport GStore from '@/store'; // import axios from 'axios'\n// const apiClient = axios.create({\n//   baseURL: process.env.VUE_APP_BACKEND_URL,\n//   withCredentials: false,\n//   headers: {\n//     Accept: 'application/json',\n//     'Content-Type': 'application/json'\n//   }\n// })\n\nexport default {\n  login: function login(user) {\n    return apiClient.post('/auth', {\n      username: user.username,\n      password: user.password\n    }).then(function (response) {\n      localStorage.setItem('token', response.data.token);\n      localStorage.setItem('user', JSON.stringify(response.data.user));\n      GStore.currentUser = response.data.user;\n      return Promise.resolve(response.data);\n    })[\"catch\"](function (error) {\n      return Promise.reject(error);\n    });\n  },\n  logout: function logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    GStore.currentUser = null;\n  },\n  getUser: function getUser() {\n    return JSON.parse(localStorage.getItem('user'));\n  },\n  hasRoles: function hasRoles(roles) {\n    if (GStore.currentUser && roles) {\n      var containRoles = GStore.currentUser.authorities.filter(function (authority) {\n        return roles.includes(authority);\n      });\n\n      if (containRoles.length > 0) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  },\n  register: function register(user) {\n    return apiClient.post('/register', {\n      username: user.username,\n      email: user.email,\n      password: user.password\n    });\n  }\n};","map":{"version":3,"names":["apiClient","GStore","login","user","post","username","password","then","response","localStorage","setItem","data","token","JSON","stringify","currentUser","Promise","resolve","error","reject","logout","removeItem","getUser","parse","getItem","hasRoles","roles","containRoles","authorities","filter","authority","includes","length","register","email"],"sources":["/Users/tanachok/Desktop/conBo/Project2/SE331-2022-Project-front-end/src/services/AuthService.js"],"sourcesContent":["import apiClient from '@/services/AxiosClient.js'\nimport GStore from '@/store'\n// import axios from 'axios'\n\n// const apiClient = axios.create({\n//   baseURL: process.env.VUE_APP_BACKEND_URL,\n//   withCredentials: false,\n//   headers: {\n//     Accept: 'application/json',\n//     'Content-Type': 'application/json'\n//   }\n// })\nexport default {\n  login(user) {\n    return apiClient\n      .post('/auth', {\n        username: user.username,\n        password: user.password\n      })\n      .then((response) => {\n        localStorage.setItem('token', response.data.token)\n        localStorage.setItem('user', JSON.stringify(response.data.user))\n        GStore.currentUser = response.data.user\n        return Promise.resolve(response.data)\n      })\n      .catch((error) => {\n        return Promise.reject(error)\n      })\n  },\n  logout() {\n    localStorage.removeItem('token')\n    localStorage.removeItem('user')\n    GStore.currentUser = null\n  },\n  getUser() {\n    return JSON.parse(localStorage.getItem('user'))\n  },\n  hasRoles(roles) {\n    if (GStore.currentUser && roles) {\n      let containRoles = GStore.currentUser.authorities.filter((authority) =>\n        roles.includes(authority)\n      )\n      if (containRoles.length > 0) {\n        return true\n      } else {\n        return false\n      }\n    } else {\n      return false\n    }\n  },\n  register(user) {\n    return apiClient.post('/register', {\n      username: user.username,\n      email: user.email,\n      password: user.password\n    })\n  }\n}\n"],"mappings":";;;;;AAAA,OAAOA,SAAP,MAAsB,2BAAtB;AACA,OAAOC,MAAP,MAAmB,SAAnB,C,CACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe;EACbC,KADa,iBACPC,IADO,EACD;IACV,OAAOH,SAAS,CACbI,IADI,CACC,OADD,EACU;MACbC,QAAQ,EAAEF,IAAI,CAACE,QADF;MAEbC,QAAQ,EAAEH,IAAI,CAACG;IAFF,CADV,EAKJC,IALI,CAKC,UAACC,QAAD,EAAc;MAClBC,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,QAAQ,CAACG,IAAT,CAAcC,KAA5C;MACAH,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BG,IAAI,CAACC,SAAL,CAAeN,QAAQ,CAACG,IAAT,CAAcR,IAA7B,CAA7B;MACAF,MAAM,CAACc,WAAP,GAAqBP,QAAQ,CAACG,IAAT,CAAcR,IAAnC;MACA,OAAOa,OAAO,CAACC,OAAR,CAAgBT,QAAQ,CAACG,IAAzB,CAAP;IACD,CAVI,WAWE,UAACO,KAAD,EAAW;MAChB,OAAOF,OAAO,CAACG,MAAR,CAAeD,KAAf,CAAP;IACD,CAbI,CAAP;EAcD,CAhBY;EAiBbE,MAjBa,oBAiBJ;IACPX,YAAY,CAACY,UAAb,CAAwB,OAAxB;IACAZ,YAAY,CAACY,UAAb,CAAwB,MAAxB;IACApB,MAAM,CAACc,WAAP,GAAqB,IAArB;EACD,CArBY;EAsBbO,OAtBa,qBAsBH;IACR,OAAOT,IAAI,CAACU,KAAL,CAAWd,YAAY,CAACe,OAAb,CAAqB,MAArB,CAAX,CAAP;EACD,CAxBY;EAyBbC,QAzBa,oBAyBJC,KAzBI,EAyBG;IACd,IAAIzB,MAAM,CAACc,WAAP,IAAsBW,KAA1B,EAAiC;MAC/B,IAAIC,YAAY,GAAG1B,MAAM,CAACc,WAAP,CAAmBa,WAAnB,CAA+BC,MAA/B,CAAsC,UAACC,SAAD;QAAA,OACvDJ,KAAK,CAACK,QAAN,CAAeD,SAAf,CADuD;MAAA,CAAtC,CAAnB;;MAGA,IAAIH,YAAY,CAACK,MAAb,GAAsB,CAA1B,EAA6B;QAC3B,OAAO,IAAP;MACD,CAFD,MAEO;QACL,OAAO,KAAP;MACD;IACF,CATD,MASO;MACL,OAAO,KAAP;IACD;EACF,CAtCY;EAuCbC,QAvCa,oBAuCJ9B,IAvCI,EAuCE;IACb,OAAOH,SAAS,CAACI,IAAV,CAAe,WAAf,EAA4B;MACjCC,QAAQ,EAAEF,IAAI,CAACE,QADkB;MAEjC6B,KAAK,EAAE/B,IAAI,CAAC+B,KAFqB;MAGjC5B,QAAQ,EAAEH,IAAI,CAACG;IAHkB,CAA5B,CAAP;EAKD;AA7CY,CAAf"},"metadata":{},"sourceType":"module"}